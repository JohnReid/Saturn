#!/usr/bin/env python
#
# Submit files to challenge
#
doc = """Usage: make-submissions SUBMISSIONFILES..."""

from docopt import docopt
import synapseclient
from synapseclient import File

#
# Parse options
#
opts = docopt(doc)
submission_files = opts['SUBMISSIONFILES']

#
# Log in
#
print('Logging in.')
syn = synapseclient.Synapse()
syn.login()

#
# Our project
#
print('Getting project.')
project = syn.get('syn7122732')

#
# Get the object representing the evaluation queue
#
print('Getting evaluation queue.')
evaluation = syn.getEvaluation(7071644)


for filename in submission_files:
    #
    # Upload our file
    #
    print('Uploading: {}'.format(filename))
    upload_file = File(filename, description='Submission', parentId = project.id)
    upload_file = syn.store(upload_file)

    #
    # Submit the file to the evaluation queue
    #
    print('Submitting: {}'.format(filename))
    submission = syn.submit(evaluation, upload_file, name='Submission', team='Saturn')
